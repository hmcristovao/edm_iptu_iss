name: ğŸ§ª Testes Pytest (CI/CD)

# Define os gatilhos para o workflow:
# Roda em pushes e Pull Requests para a branch principal (main)
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  # Permite execuÃ§Ã£o manual
  workflow_dispatch:

jobs:
  run_tests:
    name: ğŸ Testes Python ${{ matrix.python-version }}
    # O ambiente de execuÃ§Ã£o
    runs-on: ubuntu-latest
    
    # Executa o mesmo job em diferentes versÃµes do Python
    strategy:
      matrix:
        python-version: [ '3.10', '3.11', '3.12' ]

    steps:
    - name: â¬‡ï¸ Checkout do RepositÃ³rio
      # Baixa seu cÃ³digo
      uses: actions/checkout@v4

    - name: ğŸ› ï¸ Configurar Python ${{ matrix.python-version }}
      # Configura o ambiente Python. O parÃ¢metro 'cache' foi removido para evitar o erro.
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}

    - name: ğŸ“¦ Instalar Ferramentas de Teste (Pytest, Pandas, Mock)
      run: |
        # Atualiza o pip e instala as dependÃªncias necessÃ¡rias para os testes.
        python -m pip install --upgrade pip
        
        # Instala as dependÃªncias listadas no seu cÃ³digo de teste
        pip install pytest pandas mock

    - name: ğŸ§ª Executar Testes
      # Assume que os arquivos de teste estÃ£o no diretÃ³rio de trabalho padrÃ£o.
      run: |
        # -v: verbose (detalhado)
        # --log-cli-level=INFO: Exibe logs
        pytest -v --log-cli-level=INFO
        
        # Exemplo se vocÃª quiser rodar apenas um subdiretÃ³rio:
        # pytest tests/
