name: Python Pytest Tests

# Define quando o workflow deve ser executado
on:
  push:
    branches: [ "padronizacao" ] # Executa em push para a branch 'main'
  pull_request:
    branches: [ "padronizacao" ] # Executa em PRs direcionados Ã  branch 'main'
  # Permite que vocÃª execute o workflow manualmente na interface do GitHub
  workflow_dispatch:

jobs:
  # O nome do job
  build:
    # O ambiente onde o cÃ³digo serÃ¡ executado (usando a Ãºltima versÃ£o do Ubuntu)
    runs-on: ubuntu-latest
    
    # EstratÃ©gia para testar em mÃºltiplas versÃµes do Python
    strategy:
      matrix:
        python-version: [ '3.10', '3.11', '3.12' ]

    steps:
    - name: â¬‡ï¸ Checkout do CÃ³digo
      # AÃ§Ã£o para baixar seu cÃ³digo do repositÃ³rio
      uses: actions/checkout@v4

    - name: ğŸ› ï¸ Setup da VersÃ£o Python ${{ matrix.python-version }}
      # AÃ§Ã£o para configurar a versÃ£o especÃ­fica do Python
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}
        cache: 'pip' # Ativa o cache para dependÃªncias

    - name: ğŸ“¦ Instalar DependÃªncias
      run: |
        # Atualiza o pip
        python -m pip install --upgrade pip
        
        # Instala as dependÃªncias do projeto listadas em requirements.txt
        # (Assumindo que vocÃª tem um arquivo requirements.txt)
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
        
        # Instala as ferramentas de teste (pytest, mock)
        pip install pytest pandas mock
        
        # Se vocÃª usa o pytest-cov para cobertura, adicione-o aqui:
        # pip install pytest-cov

    - name: ğŸ§ª Executar Testes com Pytest
      run: |
        # O comando principal para rodar o Pytest
        # -v: Modo verbose (detalhado)
        # --log-cli-level=INFO: Exibe logs informativos durante o teste
        pytest -v --log-cli-level=INFO
        
        # Se vocÃª estiver usando o pytest-cov, use:
        # pytest --cov=. --cov-report=xml
